angular.module("basicMEAN",["ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/view1/view1",controller:"View1Ctrl as $ctrl"}).when("/view1",{templateUrl:"partials/view1/view1",controller:"View1Ctrl as $ctrl"}).when("/view2",{templateUrl:"partials/view2/view2",controller:"View2Ctrl as $ctrl"}).when("/search",{templateUrl:"partials/view-search/view-search",controller:"ViewSearchCtrl as $ctrl"}).when("/profile",{templateUrl:"partials/secure/profile/profile",controller:"ProfileCtrl as $ctrl"}).when("/view-protected",{templateUrl:"partials/secure/view-protected/view-protected",controller:"ViewProtectedCtrl as $ctrl"})}]),angular.module("basicMEAN").component("navbar",{templateUrl:"/partials/navbar/navbar",controller:"NavbarCtrl as navbar",bindings:{}}).controller("NavbarCtrl",["$scope","$http","$location","$window","$timeout",function(e,t,r,a,i){const n=this;n.data={left:{public:[{path:{primary:"/view1",alt:"/"},displayName:"View 1"},{path:{primary:"/view2"},displayName:"View 2"}],protected:[{path:{primary:"/view-protected"},displayName:"View-Protected"}]},right:{public:[],protected:[{path:{primary:"/profile"},displayName:"Profile"}]}},n.$location=r,e.$on("$locationChangeStart",function(e){n.loading=!0}),e.$on("$locationChangeSuccess",function(e){n.loading=!1});n.login=function(){let e={email:n.loginEmail,password:n.loginPass};n.loading=!0,t.post("/authenticate/login",e).then(function(){n.loading=!1,a.location.href="/#/profile",a.location.reload()},function(){n.loading=!1,n.showLoginErrorMsg=!0,n.loginErrorMsg="Login failed",i(function(){n.showLoginErrorMsg=!1},4e3)})};n.signup=function(){if(!1===function(){if(t=n.signupEmail,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))return e="You must enter a valid email address.",n.emailError=!0,s(e,!0),i(function(){n.emailError=!1},4e3),!1;var e;var t;let r=n.signupPass!=n.signupPassConfirm,a=!r&&(l=n.signupPass,l.length>=8);var l;if(r)return o("Your passwords must match."),!1;if(!a)return o("Your password must be at least 8 characters long."),!1;return!0}())return void console.log("there were errors in the signup params!");let e={email:n.signupEmail,password:n.signupPass};t.post("/authenticate/signup",e).then(function(){a.location.href="/#/profile",a.location.reload()},function(){s("Signup failed. Try again later.",!0)})};function o(e){n.passwordError=!0,s(e,!0),i(function(){n.passwordError=!1},4e3)}function s(e,t){n.signupErrorMsg=e,n.showSignupErrorMsg=!0,t&&i(function(){n.showSignupErrorMsg=!1},4e3)}n.clicked=function(){console.log("test click!")}}]),angular.module("basicMEAN").service("Search",["$location","$http","$q",function(e,t,r){let a=this;a.SEARCH_VIEW_ROUTE="/search",a.searchData={latestSearchTerm:null},a.viewSearchResults=function(t){t?(a.searchData.latestSearchTerm=t,e.path(a.SEARCH_VIEW_ROUTE).search({searchTerm:t})):console.error("A search term must be provided!")},a.getSearchResults=function(e){return r(function(e,t){e(["Sample result 1","Sample result 2","Sample result 3","Sample result 4"])})}}]),angular.module("basicMEAN").service("Settings",["$http",function(e){let t=this;t.data=null,t.init=e.get("/settings/settings.json").then(function(e){t.data=e.data})}]),angular.module("basicMEAN").controller("View1Ctrl",["Settings",function(e){let t=this;t.message="This is some more text relevant to view 1, but is stored in the View1Ctrl.",t.$onInit=function(){e.init.then(function(){t.message=e.data.view1Msg})},t.$onInit()}]),angular.module("basicMEAN").controller("ViewSearchCtrl",["$location","Search",function(e,t){let r=this;r.searchViewData={activeSearchTerm:e.search().searchTerm,searchBoxTerm:"",searchResults:null},r.message=`Viewing results for searchTerm = "${r.searchViewData.activeSearchTerm}"`,r.displaySearchResults=function(e){t.getSearchResults(e).then(function(e){r.searchViewData.searchResults=e,console.log("Search results %o",e)})},r.initNewSearch=function(){t.viewSearchResults(r.searchViewData.searchBoxTerm)},r.$onInit=function(){r.searchViewData.activeSearchTerm&&r.displaySearchResults(r.searchViewData.activeSearchTerm)},r.$onInit()}]),angular.module("basicMEAN").controller("View2Ctrl",["Settings",function(e){let t=this;t.message="This is some more text relevant to view 2, but is stored in the View2Ctrl.",t.$onInit=function(){e.init.then(function(){t.message=e.data.view2Msg})},t.$onInit()}]),angular.module("basicMEAN").controller("ProfileCtrl",["Settings",function(e){let t=this;t.message="This is some more text relevant to the profile page, but is stored in the ProfileCtrl.",t.$onInit=function(){e.init.then(function(){t.message=e.data.profileMsg})},t.$onInit()}]),angular.module("basicMEAN").controller("ViewProtectedCtrl",[function(){this.message="This is some more protected text relevant to our protected view."}]);